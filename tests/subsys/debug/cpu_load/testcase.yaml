common:
  tags: cpu_load
  arch_allow:
    - arm
    - arm64
    - riscv
  filter: CONFIG_CPU_LOAD
tests:
  debug.cpu_load:
    filter: not CONFIG_SOC_FAMILY_MAX32
    integration_platforms:
      - mps2/an385
      - qemu_cortex_m3
  debug.cpu_load.max32:
    filter: CONFIG_SOC_FAMILY_MAX32
    integration_platforms:
      - max32655evkit/max32655/m4
      - max32690evkit/max32690/m4
    extra_configs:
      - CONFIG_MAX32_ON_ENTER_CPU_IDLE_HOOK=n
      - CONFIG_BOOT_DELAY=1000
  debug.cpu_load.counter:
    platform_allow:
      - nrf52840dk/nrf52840
      - nrf54h20dk/nrf54h20/cpuapp
      - qemu_cortex_m3
    integration_platforms:
      - nrf52840dk/nrf52840
      - qemu_cortex_m3
    extra_configs:
      - CONFIG_CPU_LOAD_USE_COUNTER=y
  debug.cpu_load.periodic_report:
    filter: not CONFIG_SOC_FAMILY_MAX32
    integration_platforms:
      - mps2/an385
      - qemu_cortex_m3
    extra_args:
      - EXTRA_CONF_FILE="prj_periodic.conf"
  debug.cpu_load.periodic_report.max32:
    filter: CONFIG_SOC_FAMILY_MAX32
    integration_platforms:
      - max32655evkit/max32655/m4
      - max32690evkit/max32690/m4
    extra_args:
      - EXTRA_CONF_FILE="prj_periodic.conf"
    extra_configs:
      - CONFIG_MAX32_ON_ENTER_CPU_IDLE_HOOK=n
      - CONFIG_BOOT_DELAY=1000
